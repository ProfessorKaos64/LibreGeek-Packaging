#!/usr/bin/make -f

# Install/build modeled from
# https://aur.archlinux.org/cgit/aur.git/tree/PKGBUILD?h=mock

%:
	dh $@

PYTHON_SITELIB = $(shell python -c "from distutils.sysconfig import get_python_lib; import sys; sys.stdout.write(get_python_lib())")

override_dh_auto_build:
	rm -rf build && mkdir build 
	cd build && cmake -DCMAKE_BUILD_TYPE=Release  \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DPYTHON_DESIRED=3          \
		..
	make
	make doc-man

override_dh_auto_test:
	# Don't run dh_auto_test (selt tests), as they seem to require root.
